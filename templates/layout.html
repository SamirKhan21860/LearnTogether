<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- <script src="https://cdn.tailwindcss.com"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script> -->
    <title>Student: {% block title %}{% endblock %}</title>
</head>

<body class="bg-[rgb(240,228,252)]">

    <!-- LOGO -->
    <nav class="flex">
        <div class="flex items-center px-4 py-4">
            <div class="logo flex items-center justify-center bg-orange-500 rounded-full p-2 w-16 h-16">
                <a class="text-white font-bold text-sm" href="/">Student</a>
            </div>
        </div>

        <!-- Nav item list -->
        {% if session["user_id"] %}
        <div class="flex justify-center items-center">
            <ul class="flex space-x-4 m-auto text-gray">
                <li><a class="bg-[#aff4c6] rounded-full px-4 py-2 hover:bg-black hover:text-[#aff4c6] transition duration-300"
                        href="/home">Home</a></li>
                <li><a class="bg-[#aff4c6] rounded-full px-4 py-2 hover:bg-black hover:text-[#aff4c6] transition duration-300"
                        href="/classes">Classes</a></li>
                <li><a class="bg-[#aff4c6] rounded-full px-4 py-2 hover:bg-black hover:text-[#aff4c6] transition duration-300"
                        href="/exams">Exams</a></li>
                <li><a class="bg-[#aff4c6] rounded-full px-4 py-2 hover:bg-black hover:text-[#aff4c6] transition duration-300"
                        href="/messages">Messages</a></li>
            </ul>
        </div>

        <!-- Burger Menu Button -->
        <div class="md:hidden">
            <button id="burger-menu" class="text-gray-500 hover:text-gray-800 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M 3 5 A 1.0001 1.0001 0 1 0 3 7 L 21 7 A 1.0001 1.0001 0 1 0 21 5 L 3 5 z M 3 11 A 1.0001 1.0001 0 1 0 3 13 L 21 13 A 1.0001 1.0001 0 1 0 21 11 L 3 11 z M 3 17 A 1.0001 1.0001 0 1 0 3 19 L 21 19 A 1.0001 1.0001 0 1 0 21 17 L 3 17 z">
                    </path>
                </svg>
            </button>
        </div>

        <!-- Burger Menu Content -->
        <div id="burger-menu-content"
            class="hidden md:flex flex-col md:flex-row md:items-center md:space-x-4 mt-4 md:mt-0">
            <!-- ... existing menu items ... -->
            <ul class="logout">
                <li><a href="/logout" class="text-red-500 hover:underline transition duration-300">Log Out</a></li>
            </ul>
        </div>

        <!-- LOG OUT SHOULD BE IN \\\ FLYOUT BUTTION -->
        <!-- <div class="logout ml-16 flex justify-end self-center content-end">
            <ul class="logout">
                <li><a href="/logout" class="text-red-500 hover:underline transition duration-300">Log Out</a></li>
            </ul>
        </div> -->

        {% else %}
        <!-- <div class="mr-0 mt-0"> -->
        <div id="burger-menu-content"
            class="hidden md:flex flex-col md:flex-row md:items-center md:space-x-4 mt-4 md:mt-0">
            <ul>
                <li class="signup">Don't have an account?&ThinSpace;<a href="/signup" class="text-blue-500">Sign Up</a>
                </li>
                <li class="login"><a href="/login" class="text-blue-500">Log In</a></li>
            </ul>
        </div>
        {% endif %}
    </nav>

    <!-- Section divider -->
    <hr class="divider border-t-2 border-white mx-2">

    <!-- LOG IN TEMPLATE -->
    <div class="absolute w-full mt-4 pl-20 pr-20 pb-20 flex items-center justify-center">
        {% block logIn %}
        {% endblock %}
    </div>

    <!-- SIGN UP TEMPLATE -->
    <div class="absolute w-full mt-4 pl-20 pr-20 pb-20 flex items-center justify-center">
        {% block signUp %}
        {% endblock %}
    </div>


    <!-- FLASH MESSAGES -->
    <div class="absolute w-full mt-4 pl-20 pr-20 pb-20 flex items-center justify-center">
        {% block flash_messages %}
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div class="flash-container">
                        {% for message, category in messages %}
                            <div class="flash-message {{ get_message_style_class(category) }}">
                                {{ message }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
        {% endblock %}
    </div>
    <script>
        get_message_style_class()
    </script>

    <!-- Index TEMPLATE -->
    <div class="log-in absolute w-full mt-4 pl-20 pr-20 pb-20 flex items-center justify-center">
        {% block index %}
        {% endblock %}
    </div>

    {% block javascript %}
    <script>
        // Define a custom function to assign category-specific styles
        function get_message_style_class(category) {
            // Implement your logic to determine the category and return the corresponding class
            switch (category) {
                case 'error':
                    return 'bg-red-500 text-white';
                case 'info':
                    return 'bg-blue-500 text-white';
                case 'success':
                    return 'bg-green-500 text-white';
                // Add more cases as needed
                default:
                    return 'bg-gray-500 text-white'; // Default style
            }
        }
    </script>
    {% endblock %}

    <!-- Include script.js at the end of the body -->
    <script>
        document.getElementById('burger-menu').addEventListener('click', function () {
            document.getElementById('burger-menu-content').classList.toggle('hidden');
        });
    </script>

</body>

</html>